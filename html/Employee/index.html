<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title></title>
</head>

<body>
    <div class="yf-home">
        <div class="yf-main-portal">
            <div>
                <div class="personal-userInfo">
                    <!--<img src="assets/yf/yf-home/yf-homeavatar.png">-->
                    <img id="yfsytxpic" src="">
                    <ul>
                        <li id="yfsyname" class="home-list-title"></li>
                        <li>
                            <span>单位：</span>
                            <span id="yfsydw" class="per-info-unit"></span>
                        </li>
                        <li>
                            <span>部门：</span>
                            <span id="yfsybm" class="per-info-dept"></span>
                            <span class="pu-highlight">薪酬管理</span>
                        </li>
                        <li>
                            <span>已加入国家电网：</span>
                            <span>320</span>
                            <span>天</span>
                        </li>
                        <li>
                            <span>个人信息完整度：</span>
                            <span>80</span>
                            <span>%</span>
                        </li>
                    </ul>
                </div>
            </div>
            <div>
                <div class="home-list-title">我的工作</div>
                <ul class="my-job">
                    <li class="my-job-item">
                        <span class="my-job-tip">申请</span>
                        <span class="job-list-title">个人信息修改申请</span>
                        <ul>
                            <li>
                                <span>提交日期：</span>
                                <span class="my-job-sendTime">2019-08-12</span>
                            </li>
                            <li>
                                <span>待办来源：</span>
                                <span class="my-job-from">网络安全部</span>
                            </li>
                            <li>
                                <span>状态：</span>
                                <span class="my-job-status">待完成</span>
                            </li>
                        </ul>
                    </li>
                    <li class="my-job-item">
                        <span class="my-job-tip">申请</span>
                        <span class="job-list-title">证明开具申请</span>
                        <ul>
                            <li>
                                <span>提交日期：</span>
                                <span class="my-job-sendTime">2019-08-12</span>
                            </li>
                            <li>
                                <span>待办来源：</span>
                                <span class="my-job-from">网安安</span>
                            </li>
                            <li>
                                <span>状态：</span>
                                <span class="my-job-status">待完成</span>
                            </li>
                        </ul>
                    </li>
                    <li class="my-job-item">
                        <span class="my-job-tip">证明</span>
                        <span class="job-list-title">员工人力资源字段共享申请</span>
                        <ul>
                            <li>
                                <span>提交日期：</span>
                                <span class="my-job-sendTime">2019-08-12</span>
                            </li>
                            <li>
                                <span>待办来源：</span>
                                <span class="my-job-from">陈婵</span>
                            </li>
                            <li>
                                <span>状态：</span>
                                <span class="my-job-status">待完成</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div>
                <div class="home-list-title">常用功能</div>
                <ul class="common-functions">
                    <li>
                        <img src="assets/home/icon_fnc_1.png">
                        <span>福利社保</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_2.png">
                        <span>我的考勤</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_3.png">
                        <span>证明开具</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_4.png">
                        <span>国网生涯</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_5.png">
                        <span>我的绩效</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_6.png">
                        <span>我的竞聘</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_7.png">
                        <span>授权管理</span>
                    </li>
                    <li>
                        <img src="assets/home/icon_fnc_8.png">
                        <span>我的消息</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="yf-main-portal">
            <div>
                <div class="home-list-title">个人发展路径</div>
                <div class="steps steps1" style="margin-top: 15px;">
                    <div class="step-inner-box" style="padding: 0 0 10px 0;">
                        <div class="step-inner-small">
                            高级职称评定
                            <span>2019</span>
                        </div>
                    </div>
                </div>
                <div class="steps steps2">
                    <div class="step-inner-box" style="width: 77%;">
                        <div class="step-inner-small">
                            岗位晋升
                            <span>2018</span>
                        </div>
                    </div>
                </div>
                <div class="steps steps3">
                    <div class="step-inner-box" style="width: 52%;">
                        <div class="step-inner-small">
                            岗位调整
                            <span>2017</span>
                        </div>
                    </div>
                </div>
                <div class="steps steps4">
                    <div class="step-inner-box" style="width: 27%;padding: 0 10px 0 0;">
                        <div class="step-inner-small" style="margin-top: 10px;">
                            入职国家电网
                            <span>2016</span>
                        </div>
                    </div>
                </div>
            </div>
            <div>
                <div class="home-list-title">网络大学排名(人力资源部)</div>
                <ul class="universities-rank">
                    <li class="clearfix no1">
                        <div class="top-list-left">
                            <img src="assets/yf/yf-home/no1-ava.png">
                            <div style="display: inline-block;">
                                <span style="color: #FF9600;margin-right: 8px;">NO.1</span>
                                <span>黎灿烈</span>
                            </div>
                        </div>
                        <div class="top-list-right">
                            <div style="display: inline-block;vertical-align: middle;">
                                <div>已学习<span>&nbsp;985&nbsp;</span>小时</div>
                                <div>总得分<span>&nbsp;365&nbsp;</span>分</div>
                            </div>
                            <img src="assets/yf/yf-home/no1-badge.png">
                        </div>
                    </li>
                    <li class="clearfix no2">
                        <div class="top-list-left">
                            <img src="assets/yf/yf-home/no2-ava.png">
                            <div style="display: inline-block;">
                                <span style="color: #79818A;margin-right: 8px;">NO.2</span>
                                <span>黎明</span>
                            </div>
                        </div>
                        <div class="top-list-right">
                            <div style="display: inline-block;vertical-align: middle;">
                                <div>已学习<span>&nbsp;985&nbsp;</span>小时</div>
                                <div>总得分<span>&nbsp;365&nbsp;</span>分</div>
                            </div>
                            <img src="assets/yf/yf-home/no2-badge.png">
                        </div>
                    </li>
                    <li class="clearfix no3">
                        <div class="top-list-left">
                            <img src="assets/yf/yf-home/no3-ava.png">
                            <div style="display: inline-block;vertical-align: middle;">
                                <span style="color: #9E6248;margin-right: 8px;">NO.3</span>
                                <span>陈小霞</span>
                            </div>
                        </div>
                        <div class="top-list-right">
                            <div style="display: inline-block;vertical-align: middle;">
                                <div>已学习<span>&nbsp;985&nbsp;</span>小时</div>
                                <div>总得分<span>&nbsp;365&nbsp;</span>分</div>
                            </div>
                            <img src="assets/yf/yf-home/no3-badge.png">
                        </div>
                    </li>
                </ul>
            </div>
            <div class="person-calendar">
                <div class="home-list-title">日历</div>
                <div id="calender"></div>
            </div>
        </div>
        <div class="yf-main-portal">
            <div>
                <div class="home-list-title">个人绩效</div>
                <div id="personal-achievements" style="height: 220px;width:100%"></div>
            </div>
            <div>
                <div class="home-list-title">薪档积分</div>
                <div id="socues-echarts" style="height: 220px;width:100%"></div>
            </div>
            <div style="text-align: center;">
                <img class="asst" src="assets/home/asst.png" onclick="qimoChatClick()">
            </div>
        </div>
    </div>
    <script>
        loadResources({
            id: 'js-portal',
            src: 'libs/easyui/jquery.portal.js'
        },{
            id: 'js-echarts',
            src: 'libs/echarts.min.js'
        });
        
        var personalOption =  {
            tooltip: {
               trigger: 'axis', //触发类型；轴触发，axis则鼠标hover到一条柱状图显示全部数据，item则鼠标hover到折线点显示相应数据，
               axisPointer: {  //坐标轴指示器，坐标轴触发有效，
                type: 'line', //默认为line，line直线，cross十字准星，shadow阴影
        		crossStyle: {
                    color: '#fff'
        		 }
             	}
            },
            grid:{
                left:'6%',
                top:'20%',
                right:'0%',
                bottom:'0%',
                width:'100%',
                height:'120px'
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: ['4月', '5月', '6月', '7月', '8月', '9月', '10月','11月','12月'],
                axisLabel: {        
                        show: true,
                        textStyle: {
                            color: 'rgba(143,143,155,1)',
                            fontSize:'14'
                        }
                    },
                axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false, //  x轴显示还是不显示
                    },
            },
            yAxis: {
                name: '单位%',
                nameTextStyle:{
                    color:"rgba(143,143,155,1)", 
                    fontSize:14,  
                    padding:[10,0,10,-45]
                },
                type: 'value',
                max:25,
                min:0,
                axisLabel: {        
                        show: true,
                        textStyle: {
                            color: 'rgba(143,143,155,1)',
                            fontSize:'14'
                        }
                    },
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false, //  x轴显示还是不显示
                },
                splitLine: {
                    show: true, //背景虚线不显示
                    lineStyle: {
                        color: "#d2d2d2",
                        type:'dotted'
                    }
                },
            },
            series: [{
                data: [6, 13, 9,14, 12, 18, 20,17,12],
                type: 'line',
                smooth: true,
                symbol:false,
                itemStyle: {
                    normal: {
                        color: 'rgba(248,133,29,1)'
                    }
                },
                areaStyle: {
                  normal: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#F8851DFF" },
                      { offset: 1, color: "#fff" }
                    ])
                  }
                }, //填充区域样式
            }]
        };
        var socueslOption = {
            legend: {
                x:'right',
                // padding:[0,100,0,0],   //可设定图例[距上方距离，距右方距离，距下方距离，距左方距离]
                itemGap: 20,//间距
                data:[{
                    name: "当前用户",
                    icon: "circle"
                    },{
                    name: "平均积分",
                    icon: ""
                    }]
            },
            grid:{
                left:'6%',
                top:'20%',
                right:'0%',
                bottom:'0%',
                width:'100%',
                height:'120px'
            },
            xAxis: [
                {
                    type: 'category',
                    data: ['年度绩效','资质等级','专业成果','其他'],
                    // x轴的字体样式
                    axisLabel: {        
                        show: true,
                        textStyle: {
                            color: 'rgba(143,143,155,1)',
                            fontSize:'14'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false, //  x轴显示还是不显示
                    },
                    axisPointer: {
                        type: 'shadow'
                    },
                    itemStyle:{
                        normal:{
                            
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    name: '分数',
                    nameTextStyle:{
                        color:"rgba(143,143,155,1)", 
                        fontSize:14,  
                        padding:[10,0,10,-45]
                    },
                    min: 0,
                    max: 80,
                    interval:20 ,
                     axisLabel: {        
                        show: true,
                        textStyle: {
                            color: 'rgba(143,143,155,1)',
                            fontSize:'14'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false, //  x轴显示还是不显示
                    },
                    splitLine: {
                        show: true, //背景虚线不显示
                        lineStyle: {
                            color: "#d2d2d2",
                            type:'dotted'
                        }
                    },
                },
                {
                    type: 'value',
                    //name: '温度',
                    //min: 0,
                // max: 25,
                    //interval: 5,
                    axisLabel: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false, //  x轴显示还是不显示
                    },
                    splitLine: {
                        show: false, //背景虚线不显示
                        lineStyle: {
                            color: "#d2d2d2",
                            type:'dotted'
                        }
                    },
                }
            ],
                series: [
                    {
                        name:'当前用户',
                        type:'bar',
                        barWidth: 10,
                        data:[45, 23, 34, 20],
                        itemStyle: {
                            normal: {
                                     //柱形图圆角，初始化效果
                                    barBorderRadius:[10, 10, 1, 1],
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{
                                    offset: 0,
                                    color: 'rgba(0,192,255,1)'
                                }, {
                                    offset: 1,
                                    color: 'rgba(0,126,255,1)'
                                }])
                            }
                        }
                    },
                    {
                        name:'平均积分',
                        type:'line',
                        symbol:false,
                        smooth: true,
                        yAxisIndex: 1,
                        data:[2.0,3.3, 4.5, 12.0],
                        itemStyle: {
                            normal: {
                                color: 'rgba(0,126,255,1)'
                            }
                        },
                    }
            ]
        } 

        $(function () {
            //员服人员信息
            $.ajax({
                type:'get',
                // contentType:'application/json',
                url:BASE_URL2+'/personalInfo/getUserInfo',
                data:{
                    // token:''
                    // periodType:'03',
                },
                success:function(data){
                    console.log(data,'员服首页信息')
                    $('#headerName').text(data.resultValue.applyName);   //系统头部名字
                    $('#xtsytxpic').attr('src','http://192.168.100.66/static/userImg/'+data.resultValue.empId+'.png');   //系统头部头像
                    $('#yfsyname').text('欢迎你，'+data.resultValue.applyName);   //员服首页名称
                    $('#yfsydw').text(data.resultValue.belongUnit);    //员服首页单位
                    $('#yfsybm').text(data.resultValue.belongDept);    //员服首页部门
                    // $('#yfsytxpic').attr('src','http://192.168.100.66/static/userImg/12352047.png'); //员服首页头像
                    $('#yfsytxpic').attr('src','http://192.168.100.66/static/userImg/'+data.resultValue.empId+'.png');//员服首页头像
                }
            })
            
            //日历
            $('#calender').calendar({
                current:new Date(),
                border: false,
                width: '100%',
                //width: 350,
                height: 210
            });
            //个人绩效
            var personalEcharts = echarts.init(document.getElementById('personal-achievements'));
            personalEcharts.setOption(personalOption, 'light');
            //薪档积分
            var socuesEcharts = echarts.init(document.getElementById('socues-echarts'));
            socuesEcharts.setOption(socueslOption, 'light');

            //


            //个人基本信息
            //PerBaseInfo();

            //员服代办
            //yfWork();

            //绩效信息
            // $.ajax({
            //     type:'get',
            //     url:BASE_URL+'/personalInfo/getMonthPerformanceResultByOneYear',
            //     data:{
            //         year:'2019'
            //     },
            //     success:function(data){
            //         console.log(data,'员服月度绩效信息')
            //     }
            // })
            
            // $.ajax({
            //     type:'get',
            //     url:BASE_URL+'/personalInfo/getPerformanceResultByPeroid',
            //     data:{
            //         periodType:'03',
            //         period:'201911'
            //     },
            //     success:function(data){
            //         console.log(data,'员服个人绩效')
            //     }
            // })

            //个人基本信息
            function PerBaseInfo(){
                $.ajax({
                    type:'get',
                    url:BASE_URL+'/index/basicInfor',
                    data:{
                        token:''
                    },
                    success:function(data){
                        // console.log(data,'个人基本信息')
                        if (data.resultCode==200) {
                            $('.personal-userInfo').find('.home-list-title').text('欢迎你，'+data.resultValue.applyName)
                            .end()
                            .find('.per-info-unit').text(data.resultValue.belongUnit)
                            .end()
                            .find('.per-info-dept').text(data.resultValue.belongDept)
                        }
                    }
                })
            }
            //员服代办
            function yfWork(){
                $.ajax({
                    type:'get',
                    url:BASE_URL+'/index/getUndoneMessage',
                    data:{
                        userId:'0800005',
                        date:'2019-11-05',
                        token:''
                    },
                    success:function(data){
                        if (data.resultCode == 200) {
                            var workItem = data.resultValue.slice(0,3);
                            for (var i = 0; i < workItem.length; i++) {
                                $('.my-job-item').eq(i).find('.my-job-tip').text(
                                    workItem[i].msgType=='0301'?'请假':
                                    workItem[i].msgType=='0302'?'休假':
                                    workItem[i].msgType=='0303'?'出差':
                                    workItem[i].msgType=='0304'?'加班':
                                    workItem[i].msgType=='0305'?'奖金':
                                    workItem[i].msgType=='0306'?'外出':
                                    workItem[i].msgType=='0307'?'申请':
                                    workItem[i].msgType=='0308'?'证明':
                                    workItem[i].msgType=='0309'?'产假':''
                                )
                                .end()
                                .find('.job-list-title').text(workItem[i].msgTitle)
                                .end()
                                .find('.my-job-sendTime').text(timeType(workItem[i].sendTime))
                                .end()
                                .find('.my-job-from').text(workItem[i].undoneSource)
                                .end()
                                .find('.my-job-status').text(
                                    workItem[i].msgStatus=='0'?'未完成':'已完成'
                                )
                            }
                        }
                        // console.log(data,'员服代办')
                    }
                })
            }
        });
    </Script>
</body>

</html>